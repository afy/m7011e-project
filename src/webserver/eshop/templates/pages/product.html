<!DOCTYPE html>
<html>
<body onload="test()">

<div class="navbar">
    {% include "components/navbars/navbar.html" %}
</div>

<h1>Hello World!</h1>
<p>Product page</p>

<div id="div1">

</div>


<script>

function getAllProducts() {
    apiUrl = 'https://127.0.0.1:8000/api/v1/products/all'

    fetch(apiUrl)
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        resp = response.json();
    })

    var products = [resp]

    displayProducts(products)

}

// Test display function
function test() {
    var t = [
        {"name":"Blue jeans", "price":128},
        {"name":"Black t-shirt", "price":50}
    ]
    displayProducts(t)

}



function displayProducts(data) {
    console.log('in displayproducts')


    data.forEach(element => {
        let new_div = document.createElement('a');
        let new_cont = document.createTextNode(element['name'] + " Price: " + element['price'] + "  ")
        new_div.appendChild(new_cont)
        const curr_div = document.getElementById("div1")
        document.body.insertBefore(new_div, curr_div)
        // new_prod.appendChild(document.createTextNode(element['name'], element['price']))
    });

}


</script>

</body>
</html>